
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cat√°logo de Juguetes ‚Äì MejoresJuguetes.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Cat√°logo completo de juguetes por edades, tipos, marcas y necesidades. Explora y salta directamente a Amazon con un clic.">
  css/estilos.css

  <style>
    /* ‚úÖ Estilos optimizados */
    .tabs, .subtabs {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tab-btn, .subtab-btn {
      padding: 10px 18px;
      background: #0A3D62;
      color: #fff;
      border-radius: 8px;
      cursor: pointer;
      border: 1px solid #082f4a;
      transition: 0.2s ease;
      font-weight: 600;
    }

    .tab-btn:hover, .subtab-btn:hover {
      background: #082f4a;
    }

    .tab-btn.active, .subtab-btn.active {
      background: #C9A86A;
      color: #111;
      border-color: #b8955c;
    }

    .card {
      background: #fff;
      border-radius: 10px;
      padding: 15px;
      border: 1px solid #e5e5e5;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: 0.2s ease;
      text-align: center;
      display: block;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    }

    .card img {
      width: 100%;
      height: 260px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .pagination {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 12px;
      align-items: center;
    }

    .pagination button {
      padding: 8px 14px;
      border-radius: 6px;
      border: none;
      background: #0A3D62;
      color: #fff;
      cursor: pointer;
      transition: 0.2s ease;
      font-weight: 600;
    }

    .pagination button:hover:not(:disabled) {
      background: #082f4a;
    }

    .pagination button:disabled {
      background: #999;
      cursor: not-allowed;
    }
  </style>
</head>

<body>
  <!-- ‚úÖ HEADER UNIFICADO -->
  <header class="header">
    <div class="container header-flex">

      <div class="logo-box">
        <span class="logo-icon">üß∏</span>
        <span class="logo-text">MejoresJuguetes.com</span>
      </div>

      <nav class="menu">
        <a href="index.html" class="active">Inicio</a>
        <a href="blog.html">Blog</a>
        <a href="juguetes.html">Juguetes</a>
        <a href="rankings.html">Rankings</a>
        <a href="resenas.html">Rese√±as</a>
        <a href="contacto.html">Contacto</a>
      </nav>

      <!-- ‚úÖ BUSCADOR SIEMPRE EN EL MISMO SITIO -->
      <div class="search-box">
        <form action="buscar.html" method="GET">
          <input type="text" name="q" placeholder="Buscar juguetes..." required>
          <button type="submit">üîç</button>
        </form>
      </div>

    </div>
  </header>
  <!-- ‚úÖ FIN HEADER -->

<section class="hero" style="background-image: url('img/hero.png');">
  <div class="container" style="background: rgba(0,0,0,0.55); padding: 50px 30px; border-radius: 12px;">
    <h1 style="color: #fff; font-size: 2.2rem;">Cat√°logo de Juguetes</h1>
    <p style="color: #ddd; font-size: 1.1rem;">Explora juguetes por edades, tipos, marcas y necesidades.</p>
  </div>
</section>

<main class="container">
  <section class="section">
    <div class="tabs" role="tablist">
      <button class="tab-btn active" data-main="montessori">Montessori</button>
      <button class="tab-btn" data-main="munecas">Mu√±ecas</button>
      <button class="tab-btn" data-main="puzzles">Puzzles</button>
      <button class="tab-btn" data-main="general">General</button>
      <button class="tab-btn" data-main="monsterflex">Monsterflex</button>
    </div>
  </section>

  <section class="section">
    <div id="subtabs" class="subtabs"></div>
  </section>

  <section class="section">
    <div id="resultados" class="grid"></div>
    <div id="paginacion" class="pagination">
      <button id="btnAnterior" disabled aria-label="P√°gina anterior">‚Üê Anterior</button>
      <span id="infoPagina" style="font-size:0.9rem; color:#555;"></span>
      <button id="btnSiguiente" disabled aria-label="P√°gina siguiente">Siguiente ‚Üí</button>
    </div>
  </section>
</main>

<footer class="footer">
  <div class="container">
    <p>¬© 2025 MejoresJuguetes.com ‚Äì Todos los derechos reservados</p>
    <div class="footer-links">
      quienes-somos.htmlQui√©nes somos</a>
      privacidad.htmlPol√≠tica de privacidad</a>
      cookies.htmlPol√≠tica de cookies</a>
      aviso-legal.htmlAviso legal</a>
    </div>
  </div>
</footer>

<script>
  let juguetesData = {};
  const AFFILIATE_TAG = "mejoresjuguetes-21";
  const MAX_RESULTS = 12;
  let paginaActual = 0;
  let categoriaActual = "";
  let subcategoriaActual = "";
  let SUBTABS = {};

  async function cargarJuguetes() {
    try {
      const res = await fetch("juguetes.json");
      if (!res.ok) throw new Error("Error al cargar datos");
      juguetesData = await res.json();
    } catch (error) {
      document.getElementById("resultados").innerHTML = "<p>Error al cargar juguetes.</p>";
    }
  }

  function generarSubtabsDesdeJSON() {
    SUBTABS = {};
    Object.keys(juguetesData).forEach(categoria => {
      SUBTABS[categoria] = {};
      Object.keys(juguetesData[categoria]).forEach(id => {
        const titulo = juguetesData[categoria][id].titulo || id;
        SUBTABS[categoria][id] = titulo;
      });
    });
  }

  function generarEstrellas(rating) {
    const r = Math.min(5, Number(rating) || 0);
    return "‚≠ê".repeat(Math.round(r)) + ` (${r}/5)`;
  }

  function ratingAlternativo(titulo) {
    let seed = 0;
    for (let i = 0; i < titulo.length; i++) seed += titulo.charCodeAt(i);
    return Math.min(5, (3.5 + (seed % 13) / 10)).toFixed(1);
  }

  async function buscarJuguetes(categoria, subcategoria) {
    const categoriaObj = juguetesData[categoria];
    if (!categoriaObj) return { items: [], total: 0 };
    if (!subcategoria) {
      const items = Object.values(categoriaObj);
      return { items, total: items.length };
    }
    const item = categoriaObj[subcategoria];
    return item ? { items: [item], total: 1 } : { items: [], total: 0 };
  }

  function card(item) {
    const titulo = item.titulo || "Juguete sin nombre";
    const marca = item.marca || "Marca desconocida";
    const rating = item.rating || ratingAlternativo(titulo);
    const imagen = item.imagenAmazon || "img/juguete-default.png";
    const enlace = item.amazon ? `${item.amazon}?tag=${AFFILIATE_TAG}` : "#";

    return `
      ${enlace}
        ${imagen}
        <h3>${titulo}</h3>
        <p><strong>${marca}</strong></p>
        <p>${generarEstrellas(rating)}</p>
      </a>
    `;
  }

  function cargarSubtabs() {
    const cont = document.getElementById("subtabs");
    cont.innerHTML = "";
    const subtabs = SUBTABS[categoriaActual];
    if (!subtabs) return;
    const keys = Object.keys(subtabs);
    keys.forEach((id, index) => {
      cont.innerHTML += `
        <button class="subtab-btn ${index === 0 ? "active" : ""}" data-sub="${id}">
          ${subtabs[id]}
        </button>
      `;
    });
    subcategoriaActual = keys[0];
  }

  async function cargarCategoria() {
    const { items, total } = await buscarJuguetes(categoriaActual, subcategoriaActual);
    const inicio = paginaActual * MAX_RESULTS;
    const fin = inicio + MAX_RESULTS;
    const paginaItems = items.slice(inicio, fin);
    document.getElementById("resultados").innerHTML = paginaItems.map(card).join("");
    const totalPaginas = Math.max(1, Math.ceil(total / MAX_RESULTS));
    document.getElementById("infoPagina").textContent = `P√°gina ${paginaActual + 1} de ${totalPaginas}`;
    document.getElementById("btnAnterior").disabled = paginaActual === 0;
    document.getElementById("btnSiguiente").disabled = paginaActual >= totalPaginas - 1;
    document.getElementById("paginacion").style.display = total > MAX_RESULTS ? "flex" : "none";
  }

  document.querySelectorAll(".tab-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      categoriaActual = btn.dataset.main;
      paginaActual = 0;
      cargarSubtabs();
      cargarCategoria();
    });
  });

  document.getElementById("subtabs").addEventListener("click", e => {
    if (e.target.classList.contains("subtab-btn")) {
      document.querySelectorAll(".subtab-btn").forEach(b => b.classList.remove("active"));
      e.target.classList.add("active");
      subcategoriaActual = e.target.dataset.sub;
      paginaActual = 0;
      cargarCategoria();
    }
  });

  document.getElementById("btnAnterior").addEventListener("click", () => {
    if (paginaActual > 0) {
      paginaActual--;
      cargarCategoria();
    }
  });

  document.getElementById("btnSiguiente").addEventListener("click", () => {
    paginaActual++;
    cargarCategoria();
  });

  (async () => {
    await cargarJuguetes();
    generarSubtabsDesdeJSON();
    categoriaActual = Object.keys(SUBTABS)[0];
    cargarSubtabs();
    cargarCategoria();
  })();
</script>
</body>
</html>


